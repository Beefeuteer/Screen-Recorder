(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{61:function(e,t,r){},63:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(24),s=r.n(c),o=r(23),i=r(19),u=r(18),d=r.n(u),b=r(25),l=r.n(b),j=r(30),f=(r(61),r(7)),p=null,v=[];var O=function(){var e=Object(n.useRef)("User_".concat(Date.now().toString().slice(-4))),t=Object(n.useRef)(Object(j.a)("http://localhost:3000")),r=Object(n.useRef)(),a=Object(n.useRef)(),c=Object(n.useState)(),s=Object(i.a)(c,2),u=s[0],b=s[1],O=Object(n.useState)(),h=Object(i.a)(O,2),x=h[0],m=h[1],g=Object(n.useState)(!1),w=Object(i.a)(g,2),D=w[0],k=w[1],M=Object(n.useState)(!0),S=Object(i.a)(M,2),R=S[0],y=S[1];function U(){k(!1),t.current.emit("screenData:end",e.current);var n=new Blob(v,{type:"video/mp4"}),c=URL.createObjectURL(n);r.current.src=c,a.current.href=c,a.current.download="".concat(Date.now(),"-").concat(e.current,".mp4"),p=null,v=[]}return Object(n.useEffect)((function(){t.current.emit("user:connect",e.current)}),[]),Object(n.useEffect)((function(){Object(o.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices.getDisplayMedia({audio:!0,video:!0})){e.next=14;break}return e.prev=1,e.next=4,navigator.mediaDevices.getDisplayMedia({audio:!0,video:!0});case 4:t=e.sent,b(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("*** getDisplayMedia",e.t0),y(!1);case 12:e.next=16;break;case 14:console.warn("*** getDisplayMedia not supported"),y(!1);case 16:case"end":return e.stop()}}),e,null,[[1,8]])})))()}),[]),Object(n.useEffect)((function(){Object(o.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices.getUserMedia){e.next=18;break}if(!u){e.next=16;break}return e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({audio:!1});case 5:t=e.sent,m(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("*** getUserMedia",e.t0),m("unavailable");case 13:return e.prev=13,y(!1),e.finish(13);case 16:e.next=20;break;case 18:console.warn("*** getUserMedia not supported"),y(!1);case 20:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})))()}),[u]),R?Object(f.jsx)(l.a,{type:"Oval",width:"60",color:"#0275d8"}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("h1",{children:"Screen Recording"}),Object(f.jsx)("video",{controls:!0,ref:r}),Object(f.jsx)("a",{ref:a,children:"Download"}),Object(f.jsx)("button",{onClick:function(){D?p&&p.stop():u&&x&&!p&&(k(!0),r.current.removeAttribute("src"),a.current.removeAttribute("href"),a.current.removeAttribute("download"),(p=new MediaRecorder(u)).ondataavailable=function(r){var n=r.data;v.push(n),t.current.emit("screenData:start",{username:e.current,data:n})},p.onstop=U,p.start(50))},disabled:!x,children:D?"Stop":"Start"})]})};s.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(O,{})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.1df883c9.chunk.js.map