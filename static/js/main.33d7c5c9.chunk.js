(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,r){},65:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(26),s=r.n(c),o=r(25),i=r(24),u=r(21),b=r(20),d=r.n(b),l=r(27),j=r.n(l),f=r(32),v=(r(63),r(7)),p=null,O=[];var h=function(){var e=Object(a.useRef)("User_".concat(Date.now().toString().slice(-4))),t=Object(a.useRef)(Object(f.a)("http://localhost:4000")),r=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useState)(),s=Object(u.a)(c,2),b=s[0],l=s[1],h=Object(a.useState)(),m=Object(u.a)(h,2),w=m[0],x=m[1],g=Object(a.useState)(!1),k=Object(u.a)(g,2),D=k[0],M=k[1],S=Object(a.useState)(!0),R=Object(u.a)(S,2),y=R[0],U=R[1];function A(){M(!1),t.current.emit("screenData:end",e.current);var a=new Blob(O,{type:"video/webm"}),c=URL.createObjectURL(a);r.current.src=c,n.current.href=c,n.current.download="".concat(Date.now(),"-").concat(e.current,".webm"),p=null,O=[]}return Object(a.useEffect)((function(){t.current.emit("user:connect",e.current)}),[]),Object(a.useEffect)((function(){Object(i.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices.getDisplayMedia){e.next=14;break}return e.prev=1,e.next=4,navigator.mediaDevices.getDisplayMedia({video:!0});case 4:t=e.sent,l(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("*** getDisplayMedia",e.t0),U(!1);case 12:e.next=16;break;case 14:console.warn("*** getDisplayMedia not supported"),U(!1);case 16:case"end":return e.stop()}}),e,null,[[1,8]])})))()}),[]),Object(a.useEffect)((function(){Object(i.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices.getUserMedia){e.next=18;break}if(!b){e.next=16;break}return e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({audio:!0});case 5:t=e.sent,x(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("*** getUserMedia",e.t0),x("unavailable");case 13:return e.prev=13,U(!1),e.finish(13);case 16:e.next=20;break;case 18:console.warn("*** getUserMedia not supported"),U(!1);case 20:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})))()}),[b]),y?Object(v.jsx)(j.a,{type:"Oval",width:"60",color:"#0275d8"}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h1",{children:"Screen Recording"}),Object(v.jsx)("video",{controls:!0,ref:r}),Object(v.jsx)("a",{ref:n,children:"Download"}),Object(v.jsx)("button",{onClick:function(){D?p&&p.stop():function(){var a;b&&w&&!p&&(M(!0),r.current.removeAttribute("src"),n.current.removeAttribute("href"),n.current.removeAttribute("download"),a="unavailable"===w?b:new MediaStream([].concat(Object(o.a)(b.getVideoTracks()),Object(o.a)(w.getAudioTracks()))),(p=new MediaRecorder(a)).ondataavailable=function(r){var a=r.data;O.push(a),t.current.emit("screenData:start",{username:e.current,data:a})},p.onstop=A,p.start(250))}()},disabled:!w,children:D?"Stop":"Start"})]})};s.a.render(Object(v.jsx)(n.a.StrictMode,{children:Object(v.jsx)(h,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.33d7c5c9.chunk.js.map