(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{63:function(e,t,r){},65:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),c=r(26),s=r.n(c),o=r(25),i=r(24),u=r(21),d=r(20),b=r.n(d),l=r(27),j=r.n(l),f=r(32),p=(r(63),r(7)),v=null,O=[];var h=function(){var e=Object(a.useRef)("User_".concat(Date.now().toString().slice(-4))),t=Object(a.useRef)(Object(f.a)("http://localhost:3000")),r=Object(a.useRef)(),n=Object(a.useRef)(),c=Object(a.useState)(),s=Object(u.a)(c,2),d=s[0],l=s[1],h=Object(a.useState)(),m=Object(u.a)(h,2),x=m[0],g=m[1],w=Object(a.useState)(!1),k=Object(u.a)(w,2),D=k[0],M=k[1],S=Object(a.useState)(!0),R=Object(u.a)(S,2),y=R[0],U=R[1];function A(){M(!1),t.current.emit("screenData:end",e.current);var a=new Blob(O,{type:"video/mp4"}),c=URL.createObjectURL(a);r.current.src=c,n.current.href=c,n.current.download="".concat(Date.now(),"-").concat(e.current,".mp4"),v=null,O=[]}return Object(a.useEffect)((function(){t.current.emit("user:connect",e.current)}),[]),Object(a.useEffect)((function(){Object(i.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices.getDisplayMedia){e.next=14;break}return e.prev=1,e.next=4,navigator.mediaDevices.getDisplayMedia({video:!0});case 4:t=e.sent,l(t),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("*** getDisplayMedia",e.t0),U(!1);case 12:e.next=16;break;case 14:console.warn("*** getDisplayMedia not supported"),U(!1);case 16:case"end":return e.stop()}}),e,null,[[1,8]])})))()}),[]),Object(a.useEffect)((function(){Object(i.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!navigator.mediaDevices.getUserMedia){e.next=18;break}if(!d){e.next=16;break}return e.prev=2,e.next=5,navigator.mediaDevices.getUserMedia({audio:!1});case 5:t=e.sent,g(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error("*** getUserMedia",e.t0),g("unavailable");case 13:return e.prev=13,U(!1),e.finish(13);case 16:e.next=20;break;case 18:console.warn("*** getUserMedia not supported"),U(!1);case 20:case"end":return e.stop()}}),e,null,[[2,9,13,16]])})))()}),[d]),y?Object(p.jsx)(j.a,{type:"Oval",width:"60",color:"#0275d8"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h1",{children:"Screen Recording"}),Object(p.jsx)("video",{controls:!0,ref:r}),Object(p.jsx)("a",{ref:n,children:"Download"}),Object(p.jsx)("button",{onClick:function(){D?v&&v.stop():function(){var a;d&&x&&!v&&(M(!0),r.current.removeAttribute("src"),n.current.removeAttribute("href"),n.current.removeAttribute("download"),a="unavailable"===x?d:new MediaStream([].concat(Object(o.a)(d.getVideoTracks()),Object(o.a)(x.getAudioTracks()))),(v=new MediaRecorder(a)).ondataavailable=function(r){var a=r.data;O.push(a),t.current.emit("screenData:start",{username:e.current,data:a})},v.onstop=A,v.start(250))}()},disabled:!x,children:D?"Stop":"Start"})]})};s.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(h,{})}),document.getElementById("root"))}},[[65,1,2]]]);
//# sourceMappingURL=main.cd44a70e.chunk.js.map